!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.f6=e():t.f6=e()}(this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=440)}({10:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.camelize=e.isString=void 0;e.isString=function(t){return"string"==typeof t};var n,o,i=/-(\w)/g;e.camelize=(n=function(t){return t.replace(i,(function(t,e){return e?e.toUpperCase():""}))},o=Object.create(null),function(t){return o[t]||(o[t]=n(t))})},11:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=void 0,e.isArray=Array.isArray},12:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toNumber=e.isNaN=e.isNumber=void 0;e.isNumber=function(t){return"number"==typeof t};e.isNaN=function(t){return Number.isNaN(Number(t))};e.toNumber=function(t){var r=parseFloat(t);return e.isNaN(r)?t:r}},13:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.traverseTreeUp=e.scaleMatrix=e.getAdjMatrix=e.floydWarshall=e.getDegree=void 0;e.getDegree=function(t,e,r){for(var n=[],o=0;o<t;o++)n[o]=0;return r?(r.forEach((function(t){t.source&&(n[e[t.source]]+=1),t.target&&(n[e[t.target]]+=1)})),n):n};e.floydWarshall=function(t){for(var e=[],r=t.length,n=0;n<r;n+=1){e[n]=[];for(var o=0;o<r;o+=1)n===o?e[n][o]=0:0!==t[n][o]&&t[n][o]?e[n][o]=t[n][o]:e[n][o]=1/0}for(var i=0;i<r;i+=1)for(n=0;n<r;n+=1)for(o=0;o<r;o+=1)e[n][o]>e[n][i]+e[i][o]&&(e[n][o]=e[n][i]+e[i][o]);return e};e.getAdjMatrix=function(t,e){var r=t.nodes,n=t.edges,o=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach((function(t,e){i[t.id]=e;o.push([])})),n&&n.forEach((function(t){var r=t.source,n=t.target,u=i[r],c=i[n];o[u][c]=1,e||(o[c][u]=1)})),o};e.scaleMatrix=function(t,e){var r=[];return t.forEach((function(t){var n=[];t.forEach((function(t){n.push(t*e)})),r.push(n)})),r};var n=function(t,e){if(t&&t.children)for(var r=t.children.length-1;r>=0;r--)if(!n(t.children[r],e))return;return!!e(t)};e.traverseTreeUp=function(t,e){"function"==typeof e&&n(t,e)}},14:function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.isObject=void 0;e.isObject=function(t){return null!==t&&"object"==typeof t};e.clone=function(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var r=[];return t.forEach((function(t){r.push(t)})),r.map((function(t){return e.clone(t)}))}if("object"==typeof t&&t!=={}){var o=n({},t);return Object.keys(o).forEach((function(t){o[t]=e.clone(o[t])})),o}return t}},15:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=void 0;e.isFunction=function(t){return"function"==typeof t}},195:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanLayout=void 0;var i=r(5),u=r(9);var c=0,s=function(t){function e(e){var r=t.call(this)||this;return r.maxIteration=1e3,r.gravity=10,r.speed=5,r.clustering=!1,r.clusterGravity=10,r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.onLayoutEnd=function(){},r.tick=function(){},r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){var t=this,e=this.nodes,r=this.onLayoutEnd;if(e&&0!==e.length){if(this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]),1===e.length)return e[0].x=this.center[0],e[0].y=this.center[1],void(r&&r());var n={},o={};return e.forEach((function(e,r){u.isNumber(e.x)||(e.x=Math.random()*t.width),u.isNumber(e.y)||(e.y=Math.random()*t.height),n[e.id]=e,o[e.id]=r})),this.nodeMap=n,this.nodeIdxMap=o,this.run()}r&&r()},e.prototype.run=function(){var t=this.nodes,e=this.clustering,r=this.edges;if(t){var n={};if(e)for(var o in t.forEach((function(t){if(void 0===n[t.cluster]){var e={name:t.cluster,cx:0,cy:0,count:0};n[t.cluster]=e}var r=n[t.cluster];u.isNumber(t.x)&&(r.cx+=t.x),u.isNumber(t.y)&&(r.cy+=t.y),r.count++})),n)n[o].cx/=n[o].count,n[o].cy/=n[o].count;return{nodes:t,edges:r}}},e.prototype.onTick=function(){var t=this,e=t.nodes,r=t.edges,n=t.maxIteration,o=t.center,i=t.height,s=t.width,a=t.gravity,f=t.speed,y=t.clustering,d=t.clusterGravity;if(e){var l=i*s,p=Math.sqrt(l)/10,h=l/(e.length+1),v=Math.sqrt(h),b={},x=[];if(e.forEach((function(t,e){x[e]={x:0,y:0}})),this.applyCalculate(e,r,x,v,h),y){for(var g in e.forEach((function(t,e){if(u.isNumber(t.x)&&u.isNumber(t.y)){var r=b[t.cluster],n=Math.sqrt((t.x-r.cx)*(t.x-r.cx)+(t.y-r.cy)*(t.y-r.cy)),o=v*(d||a);x[e].x-=o*(t.x-r.cx)/n,x[e].y-=o*(t.y-r.cy)/n}})),b)b[g].cx=0,b[g].cy=0,b[g].count=0;for(var g in e.forEach((function(t){var e=b[t.cluster];u.isNumber(t.x)&&(e.cx+=t.x),u.isNumber(t.y)&&(e.cy+=t.y),e.count++})),b)b[g].cx/=b[g].count,b[g].cy/=b[g].count}var m=.01*v*a;e.forEach((function(t,e){if(u.isNumber(t.x)&&u.isNumber(t.y)){if(x[e].x-=m*(t.x-o[0]),x[e].y-=m*(t.y-o[1]),u.isNumber(t.fx)&&u.isNumber(t.fy))return t.x=t.fx,void(t.y=t.fy);if(u.isNumber(t.x)&&u.isNumber(t.y)){var r=Math.sqrt(x[e].x*x[e].x+x[e].y*x[e].y);if(r>0){var n=p*(f/80);t.x+=x[e].x/r*n,t.y+=x[e].y/r*n}}}})),this.tick&&this.tick(),++c>=n&&this.onLayoutEnd&&this.onLayoutEnd()}},e.prototype.applyCalculate=function(t,e,r,n,o){this.calRepulsive(t,r,o),e&&this.calAttractive(e,r,n)},e.prototype.calRepulsive=function(t,e,r){t.forEach((function(n,o){e[o]={x:0,y:0},t.forEach((function(t,i){if(o!==i&&u.isNumber(n.x)&&u.isNumber(t.x)&&u.isNumber(n.y)&&u.isNumber(t.y)){var c=n.x-t.x,s=n.y-t.y,a=c*c+s*s;if(0===a){a=1;var f=o>i?1:-1;c=.01*f,s=.01*f}var y=r/a;e[o].x+=c*y,e[o].y+=s*y}}))}))},e.prototype.calAttractive=function(t,e,r){var n=this;t.forEach((function(t){if(t.source&&t.target){var o=n.nodeIdxMap[t.source],i=n.nodeIdxMap[t.target];if(o!==i){var c=n.nodeMap[t.source],s=n.nodeMap[t.target];if(u.isNumber(s.x)&&u.isNumber(c.x)&&u.isNumber(s.y)&&u.isNumber(c.y)){var a=s.x-c.x,f=s.y-c.y,y=Math.sqrt(a*a+f*f),d=y*y/r;e[i].x-=a/y*d,e[i].y-=f/y*d,e[o].x+=a/y*d,e[o].y+=f/y*d}}}}))},e.prototype.stop=function(){},e.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},e.prototype.getType=function(){return"fruchterman"},e}(i.Base);e.FruchtermanLayout=s},440:function(t,e,r){"use strict";r.r(e);var n=r(195);e.default=n.FruchtermanLayout},5:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;var n=function(){function t(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return t.prototype.layout=function(t){return this.init(t),this.execute(!0)},t.prototype.init=function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]},t.prototype.execute=function(t){},t.prototype.executeWithWorker=function(){},t.prototype.getDefaultCfg=function(){return{}},t.prototype.updateCfg=function(t){t&&Object.assign(this,t)},t.prototype.getType=function(){return"base"},t.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},t.prototype.onTick=function(){},t}();e.Base=n},9:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r(10),e),o(r(11),e),o(r(12),e),o(r(13),e),o(r(14),e),o(r(15),e)}}).default}));
//# sourceMappingURL=fruchtermanLayout.js.map