{"version":3,"sources":["webpack://f6/webpack/universalModuleDefinition","webpack://f6/webpack/bootstrap","webpack://f6//Users/bing/git/antv/layout/lib/util/string.js","webpack://f6//Users/bing/git/antv/layout/lib/util/array.js","webpack://f6//Users/bing/git/antv/layout/lib/util/number.js","webpack://f6//Users/bing/git/antv/layout/lib/util/math.js","webpack://f6//Users/bing/git/antv/layout/lib/util/object.js","webpack://f6//Users/bing/git/antv/layout/lib/util/function.js","webpack://f6//Users/bing/git/antv/layout/lib/layout/fruchterman.js","webpack://f6/./src/extends/layout/fruchtermanLayout/index.ts","webpack://f6//Users/bing/git/antv/layout/lib/layout/base.js","webpack://f6//Users/bing/git/antv/layout/lib/util/index.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","camelize","isString","val","fn","cache","camelizeRE","str","replace","_","toUpperCase","isArray","Array","toNumber","isNaN","isNumber","num","Number","parseFloat","traverseTreeUp","scaleMatrix","getAdjMatrix","floydWarshall","getDegree","nodeIdxMap","edges","degrees","forEach","e","source","target","adjMatrix","dist","size","length","j","Infinity","k","data","directed","nodes","matrix","nodeMap","Error","node","id","push","sIndex","tIndex","ratio","result","row","newRow","v","traverseUp","children","__assign","assign","arguments","apply","clone","isObject","Date","getTime","cp_1","map","cp_2","keys","isFunction","extendStatics","__extends","b","setPrototypeOf","__proto__","TypeError","String","__","constructor","FruchtermanLayout","base_1","util_1","iter","_super","options","_this","maxIteration","gravity","speed","clustering","clusterGravity","width","height","onLayoutEnd","tick","updateCfg","getDefaultCfg","execute","window","innerWidth","innerHeight","center","x","y","Math","random","run","clusterMap","undefined","cluster","cx","cy","count","onTick","_a","area","maxDisplace","sqrt","k2","displacements","applyCalculate","distLength","gravityForce","fx","fy","limitedDist","calRepulsive","calAttractive","u","vecX","vecY","vecLengthSqr","sign","common","uIndex","vIndex","vecLength","stop","destroy","destroyed","getType","Base","combos","positions","layout","init","reloadData","executeWithWorker","cfg","__createBinding","__exportStar"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAY,GAAID,IAEhBD,EAAS,GAAIC,IARf,CASGK,MAAM,WACT,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,K,kCCjFrDrB,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDzB,EAAQwC,SAAWxC,EAAQyC,cAAW,EAEtCzC,EAAQyC,SADO,SAAUC,GAAO,MAAsB,iBAARA,GAE9C,IAAoCC,EAC5BC,EAMJC,EAAa,SACjB7C,EAAQwC,UAR4BG,EAQG,SAAUG,GAC7C,OAAOA,EAAIC,QAAQF,GAAY,SAAUG,EAAGnC,GAAK,OAAQA,EAAIA,EAAEoC,cAAgB,OAR3EL,EAAQ1B,OAAOY,OAAO,MACnB,SAAWgB,GAEd,OADUF,EAAME,KACDF,EAAME,GAAOH,EAAGG,O,gCCRvC5B,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDzB,EAAQkD,aAAU,EAClBlD,EAAQkD,QAAUC,MAAMD,S,gCCFxBhC,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDzB,EAAQoD,SAAWpD,EAAQqD,MAAQrD,EAAQsD,cAAW,EAEtDtD,EAAQsD,SADO,SAAUZ,GAAO,MAAsB,iBAARA,GAG9C1C,EAAQqD,MADI,SAAUE,GAAO,OAAOC,OAAOH,MAAMG,OAAOD,KAMxDvD,EAAQoD,SAJO,SAAUV,GACrB,IAAIT,EAAIwB,WAAWf,GACnB,OAAO1C,EAAQqD,MAAMpB,GAAKS,EAAMT,I,gCCRpCf,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDzB,EAAQ0D,eAAiB1D,EAAQ2D,YAAc3D,EAAQ4D,aAAe5D,EAAQ6D,cAAgB7D,EAAQ8D,eAAY,EAkBlH9D,EAAQ8D,UAjBQ,SAAU7B,EAAG8B,EAAYC,GAErC,IADA,IAAIC,EAAU,GACLzD,EAAI,EAAGA,EAAIyB,EAAGzB,IACnByD,EAAQzD,GAAK,EAEjB,OAAKwD,GAELA,EAAME,SAAQ,SAAUC,GAChBA,EAAEC,SACFH,EAAQF,EAAWI,EAAEC,UAAY,GAEjCD,EAAEE,SACFJ,EAAQF,EAAWI,EAAEE,UAAY,MAGlCJ,GATIA,GA0CfjE,EAAQ6D,cA9BY,SAAUS,GAI1B,IAFA,IAAIC,EAAO,GACPC,EAAOF,EAAUG,OACZjE,EAAI,EAAGA,EAAIgE,EAAMhE,GAAK,EAAG,CAC9B+D,EAAK/D,GAAK,GACV,IAAK,IAAIkE,EAAI,EAAGA,EAAIF,EAAME,GAAK,EACvBlE,IAAMkE,EACNH,EAAK/D,GAAGkE,GAAK,EAEY,IAApBJ,EAAU9D,GAAGkE,IAAaJ,EAAU9D,GAAGkE,GAI5CH,EAAK/D,GAAGkE,GAAKJ,EAAU9D,GAAGkE,GAH1BH,EAAK/D,GAAGkE,GAAKC,IAQzB,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAMI,GAAK,EAC3B,IAASpE,EAAI,EAAGA,EAAIgE,EAAMhE,GAAK,EAC3B,IAASkE,EAAI,EAAGA,EAAIF,EAAME,GAAK,EACvBH,EAAK/D,GAAGkE,GAAKH,EAAK/D,GAAGoE,GAAKL,EAAKK,GAAGF,KAClCH,EAAK/D,GAAGkE,GAAKH,EAAK/D,GAAGoE,GAAKL,EAAKK,GAAGF,IAKlD,OAAOH,GA+BXvE,EAAQ4D,aA5BW,SAAUiB,EAAMC,GAC/B,IAAIC,EAAQF,EAAKE,MAAOf,EAAQa,EAAKb,MACjCgB,EAAS,GAETC,EAAU,GACd,IAAKF,EACD,MAAM,IAAIG,MAAM,uBAoBpB,OAlBIH,GACAA,EAAMb,SAAQ,SAAUiB,EAAM3E,GAC1ByE,EAAQE,EAAKC,IAAM5E,EAEnBwE,EAAOK,KADG,OAIdrB,GACAA,EAAME,SAAQ,SAAUC,GACpB,IAAIC,EAASD,EAAEC,OAAQC,EAASF,EAAEE,OAC9BiB,EAASL,EAAQb,GACjBmB,EAASN,EAAQZ,GACrBW,EAAOM,GAAQC,GAAU,EACpBT,IACDE,EAAOO,GAAQD,GAAU,MAI9BN,GAmBXhF,EAAQ2D,YAXU,SAAUqB,EAAQQ,GAChC,IAAIC,EAAS,GAQb,OAPAT,EAAOd,SAAQ,SAAUwB,GACrB,IAAIC,EAAS,GACbD,EAAIxB,SAAQ,SAAU0B,GAClBD,EAAON,KAAKO,EAAIJ,MAEpBC,EAAOJ,KAAKM,MAETF,GAOX,IAAII,EAAa,SAAUhB,EAAMlC,GAC7B,GAAIkC,GAAQA,EAAKiB,SACb,IAAK,IAAItF,EAAIqE,EAAKiB,SAASrB,OAAS,EAAGjE,GAAK,EAAGA,IAC3C,IAAKqF,EAAWhB,EAAKiB,SAAStF,GAAImC,GAC9B,OAGZ,QAAKA,EAAGkC,IAeZ7E,EAAQ0D,eANa,SAAUmB,EAAMlC,GACf,mBAAPA,GAGXkD,EAAWhB,EAAMlC,K,gCCzHrB,IAAIoD,EAAY3F,MAAQA,KAAK2F,UAAa,WAStC,OARAA,EAAW7E,OAAO8E,QAAU,SAAStE,GACjC,IAAK,IAAIa,EAAG/B,EAAI,EAAGyB,EAAIgE,UAAUxB,OAAQjE,EAAIyB,EAAGzB,IAE5C,IAAK,IAAI8B,KADTC,EAAI0D,UAAUzF,GACOU,OAAOkB,UAAUC,eAAe1B,KAAK4B,EAAGD,KACzDZ,EAAEY,GAAKC,EAAED,IAEjB,OAAOZ,IAEKwE,MAAM9F,KAAM6F,YAEhC/E,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDzB,EAAQmG,MAAQnG,EAAQoG,cAAW,EAInCpG,EAAQoG,SAHO,SAAU1D,GACrB,OAAe,OAARA,GAA+B,iBAARA,GA0BlC1C,EAAQmG,MAvBI,SAAU9B,GAClB,GAAe,OAAXA,EACA,OAAOA,EAEX,GAAIA,aAAkBgC,KAClB,OAAO,IAAIA,KAAKhC,EAAOiC,WAE3B,GAAIjC,aAAkBlB,MAAO,CACzB,IAAIoD,EAAO,GAIX,OAHAlC,EAAOH,SAAQ,SAAU0B,GACrBW,EAAKlB,KAAKO,MAEPW,EAAKC,KAAI,SAAUvE,GAAK,OAAOjC,EAAQmG,MAAMlE,MAExD,GAAsB,iBAAXoC,GAAuBA,IAAW,GAAI,CAC7C,IAAIoC,EAAOV,EAAS,GAAI1B,GAIxB,OAHAnD,OAAOwF,KAAKD,GAAMvC,SAAQ,SAAUU,GAChC6B,EAAK7B,GAAK5E,EAAQmG,MAAMM,EAAK7B,OAE1B6B,EAEX,OAAOpC,I,gCCtCXnD,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDzB,EAAQ2G,gBAAa,EAIrB3G,EAAQ2G,WAHS,SAAUjE,GACvB,MAAsB,mBAARA,I,iCCClB,IAGQkE,EAHJC,EACDzG,MAAQA,KAAKyG,YAERD,EAAgB,SAAU9F,EAAGgG,GAW/B,OAVAF,EACE1F,OAAO6F,gBACN,CAAEC,UAAW,cAAgB7D,OAC5B,SAAUrC,EAAGgG,GACXhG,EAAEkG,UAAYF,IAElB,SAAUhG,EAAGgG,GACX,IAAK,IAAIxE,KAAKwE,EACR5F,OAAOkB,UAAUC,eAAe1B,KAAKmG,EAAGxE,KAAIxB,EAAEwB,GAAKwE,EAAExE,MAE1CxB,EAAGgG,IAEnB,SAAUhG,EAAGgG,GAClB,GAAiB,mBAANA,GAA0B,OAANA,EAC7B,MAAM,IAAIG,UACR,uBAAyBC,OAAOJ,GAAK,iCAGzC,SAASK,IACP/G,KAAKgH,YAActG,EAFrB8F,EAAc9F,EAAGgG,GAIjBhG,EAAEsB,UACM,OAAN0E,EACI5F,OAAOY,OAAOgF,IACZK,EAAG/E,UAAY0E,EAAE1E,UAAY,IAAI+E,KAG/CjG,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDzB,EAAQqH,uBAAoB,EAC5B,IAAIC,EAAS,EAAQ,GACjBC,EAAS,EAAQ,GAUrB,IAAIC,EAAO,EAIPH,EAAkC,SAAWI,GAE/C,SAASJ,EAAkBK,GACzB,IAAIC,EAAQF,EAAO9G,KAAKP,OAASA,KAsBjC,OApBAuH,EAAMC,aAAe,IAErBD,EAAME,QAnBY,GAqBlBF,EAAMG,MApBU,EAsBhBH,EAAMI,YArBe,EAuBrBJ,EAAMK,eAtBmB,GAuBzBL,EAAM5C,MAAQ,GACd4C,EAAM3D,MAAQ,GACd2D,EAAMM,MAAQ,IACdN,EAAMO,OAAS,IACfP,EAAM1C,QAAU,GAChB0C,EAAM5D,WAAa,GAEnB4D,EAAMQ,YAAc,aAEpBR,EAAMS,KAAO,aACbT,EAAMU,UAAUX,GACTC,EA+QT,OAvSAd,EAAUQ,EAAmBI,GA0B7BJ,EAAkBjF,UAAUkG,cAAgB,WAC1C,MAAO,CACLV,aAAc,IACdC,QA1CgB,GA2ChBC,MA1Cc,EA2CdC,YA1CmB,EA2CnBC,eA1CuB,KAgD3BX,EAAkBjF,UAAUmG,QAAU,WACpC,IAAIZ,EAAQvH,KAEV2E,EADO3E,KACI2E,MACXoD,EAFO/H,KAEU+H,YACnB,GAAKpD,GAA0B,IAAjBA,EAAMN,OAApB,CAaA,GATKrE,KAAK6H,OAA2B,oBAAXO,SACxBpI,KAAK6H,MAAQO,OAAOC,YAEjBrI,KAAK8H,QAA4B,oBAAXM,SACzBpI,KAAK8H,OAASM,OAAOE,aAElBtI,KAAKuI,SACRvI,KAAKuI,OAAS,CAACvI,KAAK6H,MAAQ,EAAG7H,KAAK8H,OAAS,IAE1B,IAAjBnD,EAAMN,OAIR,OAHAM,EAAM,GAAG6D,EAAIxI,KAAKuI,OAAO,GACzB5D,EAAM,GAAG8D,EAAIzI,KAAKuI,OAAO,QACrBR,GAAaA,KAGnB,IAAIlD,EAAU,GACVlB,EAAa,GAUjB,OATAgB,EAAMb,SAAQ,SAAUiB,EAAM3E,GACvB+G,EAAOjE,SAAS6B,EAAKyD,KAAIzD,EAAKyD,EAAIE,KAAKC,SAAWpB,EAAMM,OACxDV,EAAOjE,SAAS6B,EAAK0D,KAAI1D,EAAK0D,EAAIC,KAAKC,SAAWpB,EAAMO,QAC7DjD,EAAQE,EAAKC,IAAMD,EACnBpB,EAAWoB,EAAKC,IAAM5E,KAExBJ,KAAK6E,QAAUA,EACf7E,KAAK2D,WAAaA,EAEX3D,KAAK4I,MA7BNb,GAAaA,KA+BrBd,EAAkBjF,UAAU4G,IAAM,WAChC,IACEjE,EADO3E,KACI2E,MACXgD,EAFO3H,KAES2H,WAChB/D,EAHO5D,KAGI4D,MACb,GAAKe,EAAL,CACA,IAAIkE,EAAa,GACjB,GAAIlB,EAoBF,IAAK,IAAIhG,KAnBTgD,EAAMb,SAAQ,SAAUjC,GACtB,QAA8BiH,IAA1BD,EAAWhH,EAAEkH,SAAwB,CACvC,IAAIA,EAAU,CACZpI,KAAMkB,EAAEkH,QACRC,GAAI,EACJC,GAAI,EACJC,MAAO,GAETL,EAAWhH,EAAEkH,SAAWA,EAE1B,IAAItI,EAAIoI,EAAWhH,EAAEkH,SACjB5B,EAAOjE,SAASrB,EAAE2G,KACpB/H,EAAEuI,IAAMnH,EAAE2G,GAERrB,EAAOjE,SAASrB,EAAE4G,KACpBhI,EAAEwI,IAAMpH,EAAE4G,GAEZhI,EAAEyI,WAEYL,EACdA,EAAWlH,GAAKqH,IAAMH,EAAWlH,GAAKuH,MACtCL,EAAWlH,GAAKsH,IAAMJ,EAAWlH,GAAKuH,MAI1C,MAAO,CACLvE,MAAOA,EACPf,MAAOA,KAGXqD,EAAkBjF,UAAUmH,OAAS,WACnC,IAAIC,EAAKpJ,KACP2E,EAAQyE,EAAGzE,MACXf,EAAQwF,EAAGxF,MACX4D,EAAe4B,EAAG5B,aAClBe,EAASa,EAAGb,OACZT,EAASsB,EAAGtB,OACZD,EAAQuB,EAAGvB,MACXJ,EAAU2B,EAAG3B,QACbC,EAAQ0B,EAAG1B,MACXC,EAAayB,EAAGzB,WAChBC,EAAiBwB,EAAGxB,eACtB,GAAKjD,EAAL,CACA,IAAI0E,EAAOvB,EAASD,EAChByB,EAAcZ,KAAKa,KAAKF,GAAQ,GAChCG,EAAKH,GAAQ1E,EAAMN,OAAS,GAC5BG,EAAIkE,KAAKa,KAAKC,GACdX,EAAa,GAEbY,EAAgB,GAMpB,GALA9E,EAAMb,SAAQ,SAAUlB,EAAG0B,GACzBmF,EAAcnF,GAAK,CAAEkE,EAAG,EAAGC,EAAG,MAEhCzI,KAAK0J,eAAe/E,EAAOf,EAAO6F,EAAejF,EAAGgF,GAEhD7B,EAAY,CAWd,IAAK,IAAIhG,KAVTgD,EAAMb,SAAQ,SAAUjC,EAAGyC,GACzB,GAAK6C,EAAOjE,SAASrB,EAAE2G,IAAOrB,EAAOjE,SAASrB,EAAE4G,GAAhD,CACA,IAAIhI,EAAIoI,EAAWhH,EAAEkH,SACjBY,EAAajB,KAAKa,MACnB1H,EAAE2G,EAAI/H,EAAEuI,KAAOnH,EAAE2G,EAAI/H,EAAEuI,KAAOnH,EAAE4G,EAAIhI,EAAEwI,KAAOpH,EAAE4G,EAAIhI,EAAEwI,KAEpDW,EAAepF,GAAKoD,GAAkBH,GAC1CgC,EAAcnF,GAAGkE,GAAMoB,GAAgB/H,EAAE2G,EAAI/H,EAAEuI,IAAOW,EACtDF,EAAcnF,GAAGmE,GAAMmB,GAAgB/H,EAAE4G,EAAIhI,EAAEwI,IAAOU,MAExCd,EACdA,EAAWlH,GAAKqH,GAAK,EACrBH,EAAWlH,GAAKsH,GAAK,EACrBJ,EAAWlH,GAAKuH,MAAQ,EAY1B,IAAK,IAAIvH,KAVTgD,EAAMb,SAAQ,SAAUjC,GACtB,IAAIpB,EAAIoI,EAAWhH,EAAEkH,SACjB5B,EAAOjE,SAASrB,EAAE2G,KACpB/H,EAAEuI,IAAMnH,EAAE2G,GAERrB,EAAOjE,SAASrB,EAAE4G,KACpBhI,EAAEwI,IAAMpH,EAAE4G,GAEZhI,EAAEyI,WAEYL,EACdA,EAAWlH,GAAKqH,IAAMH,EAAWlH,GAAKuH,MACtCL,EAAWlH,GAAKsH,IAAMJ,EAAWlH,GAAKuH,MAI1C,IAAIU,EAAe,IAAOpF,EAAIiD,EAG9B9C,EAAMb,SAAQ,SAAUjC,EAAGyC,GACzB,GAAK6C,EAAOjE,SAASrB,EAAE2G,IAAOrB,EAAOjE,SAASrB,EAAE4G,GAAhD,CAIA,GAHAgB,EAAcnF,GAAGkE,GAAKoB,GAAgB/H,EAAE2G,EAAID,EAAO,IACnDkB,EAAcnF,GAAGmE,GAAKmB,GAAgB/H,EAAE4G,EAAIF,EAAO,IAE/CpB,EAAOjE,SAASrB,EAAEgI,KAAO1C,EAAOjE,SAASrB,EAAEiI,IAG7C,OAFAjI,EAAE2G,EAAI3G,EAAEgI,QACRhI,EAAE4G,EAAI5G,EAAEiI,IAGV,GAAK3C,EAAOjE,SAASrB,EAAE2G,IAAOrB,EAAOjE,SAASrB,EAAE4G,GAAhD,CACA,IAAIkB,EAAajB,KAAKa,KACpBE,EAAcnF,GAAGkE,EAAIiB,EAAcnF,GAAGkE,EACpCiB,EAAcnF,GAAGmE,EAAIgB,EAAcnF,GAAGmE,GAE1C,GAAIkB,EAAa,EAAG,CAGlB,IAAII,EAAcT,GAAe5B,EA7MrB,IA8MZ7F,EAAE2G,GAAMiB,EAAcnF,GAAGkE,EAAImB,EAAcI,EAC3ClI,EAAE4G,GAAMgB,EAAcnF,GAAGmE,EAAIkB,EAAcI,QAU/C/J,KAAKgI,MAAQhI,KAAKgI,SAClBZ,GACYI,GACNxH,KAAK+H,aAAa/H,KAAK+H,gBAG/Bd,EAAkBjF,UAAU0H,eAAiB,SAC3C/E,EACAf,EACA6F,EACAjF,EACAgF,GAEAxJ,KAAKgK,aAAarF,EAAO8E,EAAeD,GACpC5F,GAAO5D,KAAKiK,cAAcrG,EAAO6F,EAAejF,IAEtDyC,EAAkBjF,UAAUgI,aAAe,SACzCrF,EACA8E,EACAD,GAEA7E,EAAMb,SAAQ,SAAU0B,EAAGpF,GACzBqJ,EAAcrJ,GAAK,CAAEoI,EAAG,EAAGC,EAAG,GAC9B9D,EAAMb,SAAQ,SAAUoG,EAAG5F,GACzB,GAAIlE,IAAMkE,GAIP6C,EAAOjE,SAASsC,EAAEgD,IAClBrB,EAAOjE,SAASgH,EAAE1B,IAClBrB,EAAOjE,SAASsC,EAAEiD,IAClBtB,EAAOjE,SAASgH,EAAEzB,GAJrB,CAOA,IAAI0B,EAAO3E,EAAEgD,EAAI0B,EAAE1B,EACf4B,EAAO5E,EAAEiD,EAAIyB,EAAEzB,EACf4B,EAAeF,EAAOA,EAAOC,EAAOA,EACxC,GAAqB,IAAjBC,EAAoB,CACtBA,EAAe,EACf,IAAIC,EAAOlK,EAAIkE,EAAI,GAAK,EACxB6F,EAAO,IAAOG,EACdF,EAAO,IAAOE,EAEhB,IAAIC,EAASf,EAAKa,EAClBZ,EAAcrJ,GAAGoI,GAAK2B,EAAOI,EAC7Bd,EAAcrJ,GAAGqI,GAAK2B,EAAOG,UAInCtD,EAAkBjF,UAAUiI,cAAgB,SAC1CrG,EACA6F,EACAjF,GAEA,IAAI+C,EAAQvH,KACZ4D,EAAME,SAAQ,SAAUC,GACtB,GAAKA,EAAEC,QAAWD,EAAEE,OAApB,CACA,IAAIuG,EAASjD,EAAM5D,WAAWI,EAAEC,QAC5ByG,EAASlD,EAAM5D,WAAWI,EAAEE,QAChC,GAAIuG,IAAWC,EAAf,CAGA,IAAIP,EAAI3C,EAAM1C,QAAQd,EAAEC,QACpBwB,EAAI+B,EAAM1C,QAAQd,EAAEE,QACxB,GACGkD,EAAOjE,SAASsC,EAAEgD,IAClBrB,EAAOjE,SAASgH,EAAE1B,IAClBrB,EAAOjE,SAASsC,EAAEiD,IAClBtB,EAAOjE,SAASgH,EAAEzB,GAJrB,CAOA,IAAI0B,EAAO3E,EAAEgD,EAAI0B,EAAE1B,EACf4B,EAAO5E,EAAEiD,EAAIyB,EAAEzB,EACfiC,EAAYhC,KAAKa,KAAKY,EAAOA,EAAOC,EAAOA,GAC3CG,EAAUG,EAAYA,EAAalG,EACvCiF,EAAcgB,GAAQjC,GAAM2B,EAAOO,EAAaH,EAChDd,EAAcgB,GAAQhC,GAAM2B,EAAOM,EAAaH,EAChDd,EAAce,GAAQhC,GAAM2B,EAAOO,EAAaH,EAChDd,EAAce,GAAQ/B,GAAM2B,EAAOM,EAAaH,SAGpDtD,EAAkBjF,UAAU2I,KAAO,aACnC1D,EAAkBjF,UAAU4I,QAAU,WACpC5K,KAAK2K,OACL3K,KAAKgI,KAAO,KACZhI,KAAK2E,MAAQ,KACb3E,KAAK4D,MAAQ,KACb5D,KAAK6K,WAAY,GAEnB5D,EAAkBjF,UAAU8I,QAAU,WACpC,MAAO,eAEF7D,EAxS6B,CAySnCC,EAAO6D,MACVnL,EAAQqH,kBAAoBA,G,iCC/V5B,oBAEe,YAAiB,mB,+BCDhCnG,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDzB,EAAQmL,UAAO,EACf,IAAIA,EAAsB,WACtB,SAASA,IACL/K,KAAK2E,MAAQ,GACb3E,KAAK4D,MAAQ,GACb5D,KAAKgL,OAAS,GACdhL,KAAKiL,UAAY,GACjBjL,KAAK6K,WAAY,EACjB7K,KAAK+H,YAAc,aAgCvB,OA9BAgD,EAAK/I,UAAUkJ,OAAS,SAAUzG,GAE9B,OADAzE,KAAKmL,KAAK1G,GACHzE,KAAKmI,SAAQ,IAExB4C,EAAK/I,UAAUmJ,KAAO,SAAU1G,GAC5BzE,KAAK2E,MAAQF,EAAKE,OAAS,GAC3B3E,KAAK4D,MAAQa,EAAKb,OAAS,GAC3B5D,KAAKgL,OAASvG,EAAKuG,QAAU,IAEjCD,EAAK/I,UAAUmG,QAAU,SAAUiD,KACnCL,EAAK/I,UAAUqJ,kBAAoB,aACnCN,EAAK/I,UAAUkG,cAAgB,WAC3B,MAAO,IAEX6C,EAAK/I,UAAUiG,UAAY,SAAUqD,GAC7BA,GACAxK,OAAO8E,OAAO5F,KAAMsL,IAG5BP,EAAK/I,UAAU8I,QAAU,WACrB,MAAO,QAEXC,EAAK/I,UAAU4I,QAAU,WACrB5K,KAAK2E,MAAQ,KACb3E,KAAK4D,MAAQ,KACb5D,KAAKgL,OAAS,KACdhL,KAAKiL,UAAY,KACjBjL,KAAK6K,WAAY,GAErBE,EAAK/I,UAAUmH,OAAS,aACjB4B,EAvCc,GAyCzBnL,EAAQmL,KAAOA,G,+BC3Cf,IAAIQ,EAAmBvL,MAAQA,KAAKuL,kBAAqBzK,OAAOY,OAAS,SAAUb,EAAGL,EAAGgE,EAAGgF,QAC7EV,IAAPU,IAAkBA,EAAKhF,GAC3B1D,OAAOC,eAAeF,EAAG2I,EAAI,CAAExI,YAAY,EAAMC,IAAK,WAAa,OAAOT,EAAEgE,OAC3E,SAAU3D,EAAGL,EAAGgE,EAAGgF,QACTV,IAAPU,IAAkBA,EAAKhF,GAC3B3D,EAAE2I,GAAMhJ,EAAEgE,KAEVgH,EAAgBxL,MAAQA,KAAKwL,cAAiB,SAAShL,EAAGZ,GAC1D,IAAK,IAAIsC,KAAK1B,EAAa,YAAN0B,GAAoBpB,OAAOkB,UAAUC,eAAe1B,KAAKX,EAASsC,IAAIqJ,EAAgB3L,EAASY,EAAG0B,IAE3HpB,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDmK,EAAa,EAAQ,IAAa5L,GAClC4L,EAAa,EAAQ,IAAY5L,GACjC4L,EAAa,EAAQ,IAAa5L,GAClC4L,EAAa,EAAQ,IAAW5L,GAChC4L,EAAa,EAAQ,IAAa5L,GAClC4L,EAAa,EAAQ,IAAe5L,M","file":"extends/layout/fruchtermanLayout.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"f6\"] = factory();\n\telse\n\t\troot[\"f6\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 440);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.camelize = exports.isString = void 0;\nvar isString = function (val) { return typeof val === 'string'; };\nexports.isString = isString;\nvar cacheStringFunction = function (fn) {\n    var cache = Object.create(null);\n    return (function (str) {\n        var hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nvar camelizeRE = /-(\\w)/g;\nexports.camelize = cacheStringFunction(function (str) {\n    return str.replace(camelizeRE, function (_, c) { return (c ? c.toUpperCase() : ''); });\n});\n// export const capitalize = cacheStringFunction(\n//   (str: string) => str.charAt(0).toUpperCase() + str.slice(1),\n// )\n//# sourceMappingURL=string.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isArray = void 0;\nexports.isArray = Array.isArray;\n//# sourceMappingURL=array.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toNumber = exports.isNaN = exports.isNumber = void 0;\nvar isNumber = function (val) { return typeof val === 'number'; };\nexports.isNumber = isNumber;\nvar isNaN = function (num) { return Number.isNaN(Number(num)); };\nexports.isNaN = isNaN;\nvar toNumber = function (val) {\n    var n = parseFloat(val);\n    return exports.isNaN(n) ? val : n;\n};\nexports.toNumber = toNumber;\n//# sourceMappingURL=number.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.traverseTreeUp = exports.scaleMatrix = exports.getAdjMatrix = exports.floydWarshall = exports.getDegree = void 0;\nvar getDegree = function (n, nodeIdxMap, edges) {\n    var degrees = [];\n    for (var i = 0; i < n; i++) {\n        degrees[i] = 0;\n    }\n    if (!edges)\n        return degrees;\n    edges.forEach(function (e) {\n        if (e.source) {\n            degrees[nodeIdxMap[e.source]] += 1;\n        }\n        if (e.target) {\n            degrees[nodeIdxMap[e.target]] += 1;\n        }\n    });\n    return degrees;\n};\nexports.getDegree = getDegree;\nvar floydWarshall = function (adjMatrix) {\n    // initialize\n    var dist = [];\n    var size = adjMatrix.length;\n    for (var i = 0; i < size; i += 1) {\n        dist[i] = [];\n        for (var j = 0; j < size; j += 1) {\n            if (i === j) {\n                dist[i][j] = 0;\n            }\n            else if (adjMatrix[i][j] === 0 || !adjMatrix[i][j]) {\n                dist[i][j] = Infinity;\n            }\n            else {\n                dist[i][j] = adjMatrix[i][j];\n            }\n        }\n    }\n    // floyd\n    for (var k = 0; k < size; k += 1) {\n        for (var i = 0; i < size; i += 1) {\n            for (var j = 0; j < size; j += 1) {\n                if (dist[i][j] > dist[i][k] + dist[k][j]) {\n                    dist[i][j] = dist[i][k] + dist[k][j];\n                }\n            }\n        }\n    }\n    return dist;\n};\nexports.floydWarshall = floydWarshall;\nvar getAdjMatrix = function (data, directed) {\n    var nodes = data.nodes, edges = data.edges;\n    var matrix = [];\n    // map node with index in data.nodes\n    var nodeMap = {};\n    if (!nodes) {\n        throw new Error('invalid nodes data!');\n    }\n    if (nodes) {\n        nodes.forEach(function (node, i) {\n            nodeMap[node.id] = i;\n            var row = [];\n            matrix.push(row);\n        });\n    }\n    if (edges) {\n        edges.forEach(function (e) {\n            var source = e.source, target = e.target;\n            var sIndex = nodeMap[source];\n            var tIndex = nodeMap[target];\n            matrix[sIndex][tIndex] = 1;\n            if (!directed) {\n                matrix[tIndex][sIndex] = 1;\n            }\n        });\n    }\n    return matrix;\n};\nexports.getAdjMatrix = getAdjMatrix;\n/**\n * scale matrix\n * @param matrix [ [], [], [] ]\n * @param ratio\n */\nvar scaleMatrix = function (matrix, ratio) {\n    var result = [];\n    matrix.forEach(function (row) {\n        var newRow = [];\n        row.forEach(function (v) {\n            newRow.push(v * ratio);\n        });\n        result.push(newRow);\n    });\n    return result;\n};\nexports.scaleMatrix = scaleMatrix;\n/**\n * depth first traverse, from leaves to root, children in inverse order\n *  if the fn returns false, terminate the traverse\n */\nvar traverseUp = function (data, fn) {\n    if (data && data.children) {\n        for (var i = data.children.length - 1; i >= 0; i--) {\n            if (!traverseUp(data.children[i], fn))\n                return;\n        }\n    }\n    if (!fn(data)) {\n        return false;\n    }\n    return true;\n};\n/**\n * depth first traverse, from leaves to root, children in inverse order\n * if the fn returns false, terminate the traverse\n */\nvar traverseTreeUp = function (data, fn) {\n    if (typeof fn !== 'function') {\n        return;\n    }\n    traverseUp(data, fn);\n};\nexports.traverseTreeUp = traverseTreeUp;\n//# sourceMappingURL=math.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.clone = exports.isObject = void 0;\nvar isObject = function (val) {\n    return val !== null && typeof val === 'object';\n};\nexports.isObject = isObject;\nvar clone = function (target) {\n    if (target === null) {\n        return target;\n    }\n    if (target instanceof Date) {\n        return new Date(target.getTime());\n    }\n    if (target instanceof Array) {\n        var cp_1 = [];\n        target.forEach(function (v) {\n            cp_1.push(v);\n        });\n        return cp_1.map(function (n) { return exports.clone(n); });\n    }\n    if (typeof target === 'object' && target !== {}) {\n        var cp_2 = __assign({}, target);\n        Object.keys(cp_2).forEach(function (k) {\n            cp_2[k] = exports.clone(cp_2[k]);\n        });\n        return cp_2;\n    }\n    return target;\n};\nexports.clone = clone;\n//# sourceMappingURL=object.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isFunction = void 0;\nvar isFunction = function (val) {\n    return typeof val === 'function';\n};\nexports.isFunction = isFunction;\n//# sourceMappingURL=function.js.map","'use strict';\n/**\n * @fileOverview fruchterman layout\n * @author shiwu.wyy@antfin.com\n */\nvar __extends =\n  (this && this.__extends) ||\n  (function () {\n    var extendStatics = function (d, b) {\n      extendStatics =\n        Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array &&\n          function (d, b) {\n            d.__proto__ = b;\n          }) ||\n        function (d, b) {\n          for (var p in b)\n            if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n      return extendStatics(d, b);\n    };\n    return function (d, b) {\n      if (typeof b !== 'function' && b !== null)\n        throw new TypeError(\n          'Class extends value ' + String(b) + ' is not a constructor or null',\n        );\n      extendStatics(d, b);\n      function __() {\n        this.constructor = d;\n      }\n      d.prototype =\n        b === null\n          ? Object.create(b)\n          : ((__.prototype = b.prototype), new __());\n    };\n  })();\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.FruchtermanLayout = void 0;\nvar base_1 = require('./base');\nvar util_1 = require('../util');\nvar SPEED_DIVISOR = 80;\nvar DEFAULT_GRAVITY = 10;\nvar DEFAULT_SPEED = 5;\nvar DEFAULT_CLUSTERING = false;\nvar DEFAULT_CLUSTERGRAVITY = 10;\nfunction easeOut(t, b, c, d) {\n  return c * ((t = t / d - 1) * t * t + 1) + b;\n}\n\nvar iter = 0;\n/**\n * fruchterman 布局\n */\nvar FruchtermanLayout = /** @class */ (function (_super) {\n  __extends(FruchtermanLayout, _super);\n  function FruchtermanLayout(options) {\n    var _this = _super.call(this) || this;\n    /** 停止迭代的最大迭代数 */\n    _this.maxIteration = 1000;\n    /** 重力大小，影响图的紧凑程度 */\n    _this.gravity = DEFAULT_GRAVITY;\n    /** 速度 */\n    _this.speed = DEFAULT_SPEED;\n    /** 是否产生聚类力 */\n    _this.clustering = DEFAULT_CLUSTERING;\n    /** 聚类力大小 */\n    _this.clusterGravity = DEFAULT_CLUSTERGRAVITY;\n    _this.nodes = [];\n    _this.edges = [];\n    _this.width = 300;\n    _this.height = 300;\n    _this.nodeMap = {};\n    _this.nodeIdxMap = {};\n    /** 迭代结束的回调函数 */\n    _this.onLayoutEnd = function () {};\n    /** 每次迭代结束的回调函数 */\n    _this.tick = function () {};\n    _this.updateCfg(options);\n    return _this;\n  }\n  FruchtermanLayout.prototype.getDefaultCfg = function () {\n    return {\n      maxIteration: 1000,\n      gravity: DEFAULT_GRAVITY,\n      speed: DEFAULT_SPEED,\n      clustering: DEFAULT_CLUSTERING,\n      clusterGravity: DEFAULT_CLUSTERGRAVITY,\n    };\n  };\n  /**\n   * 执行布局\n   */\n  FruchtermanLayout.prototype.execute = function () {\n    var _this = this;\n    var _a = this,\n      nodes = _a.nodes,\n      onLayoutEnd = _a.onLayoutEnd;\n    if (!nodes || nodes.length === 0) {\n      if (onLayoutEnd) onLayoutEnd();\n      return;\n    }\n    if (!this.width && typeof window !== 'undefined') {\n      this.width = window.innerWidth;\n    }\n    if (!this.height && typeof window !== 'undefined') {\n      this.height = window.innerHeight;\n    }\n    if (!this.center) {\n      this.center = [this.width / 2, this.height / 2];\n    }\n    if (nodes.length === 1) {\n      nodes[0].x = this.center[0];\n      nodes[0].y = this.center[1];\n      if (onLayoutEnd) onLayoutEnd();\n      return;\n    }\n    var nodeMap = {};\n    var nodeIdxMap = {};\n    nodes.forEach(function (node, i) {\n      if (!util_1.isNumber(node.x)) node.x = Math.random() * _this.width;\n      if (!util_1.isNumber(node.y)) node.y = Math.random() * _this.height;\n      nodeMap[node.id] = node;\n      nodeIdxMap[node.id] = i;\n    });\n    this.nodeMap = nodeMap;\n    this.nodeIdxMap = nodeIdxMap;\n    // layout\n    return this.run();\n  };\n  FruchtermanLayout.prototype.run = function () {\n    var _a = this,\n      nodes = _a.nodes,\n      clustering = _a.clustering,\n      edges = _a.edges;\n    if (!nodes) return;\n    var clusterMap = {};\n    if (clustering) {\n      nodes.forEach(function (n) {\n        if (clusterMap[n.cluster] === undefined) {\n          var cluster = {\n            name: n.cluster,\n            cx: 0,\n            cy: 0,\n            count: 0,\n          };\n          clusterMap[n.cluster] = cluster;\n        }\n        var c = clusterMap[n.cluster];\n        if (util_1.isNumber(n.x)) {\n          c.cx += n.x;\n        }\n        if (util_1.isNumber(n.y)) {\n          c.cy += n.y;\n        }\n        c.count++;\n      });\n      for (var key in clusterMap) {\n        clusterMap[key].cx /= clusterMap[key].count;\n        clusterMap[key].cy /= clusterMap[key].count;\n      }\n    }\n    // interval for render the result after each iteration\n    return {\n      nodes: nodes,\n      edges: edges,\n    };\n  };\n  FruchtermanLayout.prototype.onTick = function () {\n    var _a = this,\n      nodes = _a.nodes,\n      edges = _a.edges,\n      maxIteration = _a.maxIteration,\n      center = _a.center,\n      height = _a.height,\n      width = _a.width,\n      gravity = _a.gravity,\n      speed = _a.speed,\n      clustering = _a.clustering,\n      clusterGravity = _a.clusterGravity;\n    if (!nodes) return;\n    var area = height * width;\n    var maxDisplace = Math.sqrt(area) / 10;\n    var k2 = area / (nodes.length + 1);\n    var k = Math.sqrt(k2);\n    var clusterMap = {};\n    // for (let i = 0; i < maxIteration; i++) {\n    var displacements = [];\n    nodes.forEach(function (_, j) {\n      displacements[j] = { x: 0, y: 0 };\n    });\n    this.applyCalculate(nodes, edges, displacements, k, k2);\n    // gravity for clusters\n    if (clustering) {\n      nodes.forEach(function (n, j) {\n        if (!util_1.isNumber(n.x) || !util_1.isNumber(n.y)) return;\n        var c = clusterMap[n.cluster];\n        var distLength = Math.sqrt(\n          (n.x - c.cx) * (n.x - c.cx) + (n.y - c.cy) * (n.y - c.cy),\n        );\n        var gravityForce = k * (clusterGravity || gravity);\n        displacements[j].x -= (gravityForce * (n.x - c.cx)) / distLength;\n        displacements[j].y -= (gravityForce * (n.y - c.cy)) / distLength;\n      });\n      for (var key in clusterMap) {\n        clusterMap[key].cx = 0;\n        clusterMap[key].cy = 0;\n        clusterMap[key].count = 0;\n      }\n      nodes.forEach(function (n) {\n        var c = clusterMap[n.cluster];\n        if (util_1.isNumber(n.x)) {\n          c.cx += n.x;\n        }\n        if (util_1.isNumber(n.y)) {\n          c.cy += n.y;\n        }\n        c.count++;\n      });\n      for (var key in clusterMap) {\n        clusterMap[key].cx /= clusterMap[key].count;\n        clusterMap[key].cy /= clusterMap[key].count;\n      }\n    }\n\n    var gravityForce = 0.01 * k * gravity;\n\n    // gravity\n    nodes.forEach(function (n, j) {\n      if (!util_1.isNumber(n.x) || !util_1.isNumber(n.y)) return;\n      displacements[j].x -= gravityForce * (n.x - center[0]);\n      displacements[j].y -= gravityForce * (n.y - center[1]);\n      // move\n      if (util_1.isNumber(n.fx) && util_1.isNumber(n.fy)) {\n        n.x = n.fx;\n        n.y = n.fy;\n        return;\n      }\n      if (!util_1.isNumber(n.x) || !util_1.isNumber(n.y)) return;\n      var distLength = Math.sqrt(\n        displacements[j].x * displacements[j].x +\n          displacements[j].y * displacements[j].y,\n      );\n      if (distLength > 0) {\n        // && !n.isFixed()\n        //var limitedDist = Math.min(maxDisplace * (speed / SPEED_DIVISOR), distLength);\n        var limitedDist = maxDisplace * (speed / SPEED_DIVISOR);\n        n.x += (displacements[j].x / distLength) * limitedDist;\n        n.y += (displacements[j].y / distLength) * limitedDist;\n      }\n    });\n\n    //this.speed = this.speed - easeOut(iter, 0, 0.00000001, 1);\n    //console.log('speed', this.speed);\n    //if (this.speed < 0) {\n    //  this.speed = 0;\n    //}\n\n    this.tick && this.tick();\n    iter++;\n    if (iter >= maxIteration) {\n      if (this.onLayoutEnd) this.onLayoutEnd();\n    }\n  };\n  FruchtermanLayout.prototype.applyCalculate = function (\n    nodes,\n    edges,\n    displacements,\n    k,\n    k2,\n  ) {\n    this.calRepulsive(nodes, displacements, k2);\n    if (edges) this.calAttractive(edges, displacements, k);\n  };\n  FruchtermanLayout.prototype.calRepulsive = function (\n    nodes,\n    displacements,\n    k2,\n  ) {\n    nodes.forEach(function (v, i) {\n      displacements[i] = { x: 0, y: 0 };\n      nodes.forEach(function (u, j) {\n        if (i === j) {\n          return;\n        }\n        if (\n          !util_1.isNumber(v.x) ||\n          !util_1.isNumber(u.x) ||\n          !util_1.isNumber(v.y) ||\n          !util_1.isNumber(u.y)\n        )\n          return;\n        var vecX = v.x - u.x;\n        var vecY = v.y - u.y;\n        var vecLengthSqr = vecX * vecX + vecY * vecY;\n        if (vecLengthSqr === 0) {\n          vecLengthSqr = 1;\n          var sign = i > j ? 1 : -1;\n          vecX = 0.01 * sign;\n          vecY = 0.01 * sign;\n        }\n        var common = k2 / vecLengthSqr;\n        displacements[i].x += vecX * common;\n        displacements[i].y += vecY * common;\n      });\n    });\n  };\n  FruchtermanLayout.prototype.calAttractive = function (\n    edges,\n    displacements,\n    k,\n  ) {\n    var _this = this;\n    edges.forEach(function (e) {\n      if (!e.source || !e.target) return;\n      var uIndex = _this.nodeIdxMap[e.source];\n      var vIndex = _this.nodeIdxMap[e.target];\n      if (uIndex === vIndex) {\n        return;\n      }\n      var u = _this.nodeMap[e.source];\n      var v = _this.nodeMap[e.target];\n      if (\n        !util_1.isNumber(v.x) ||\n        !util_1.isNumber(u.x) ||\n        !util_1.isNumber(v.y) ||\n        !util_1.isNumber(u.y)\n      )\n        return;\n      var vecX = v.x - u.x;\n      var vecY = v.y - u.y;\n      var vecLength = Math.sqrt(vecX * vecX + vecY * vecY);\n      var common = (vecLength * vecLength) / k;\n      displacements[vIndex].x -= (vecX / vecLength) * common;\n      displacements[vIndex].y -= (vecY / vecLength) * common;\n      displacements[uIndex].x += (vecX / vecLength) * common;\n      displacements[uIndex].y += (vecY / vecLength) * common;\n    });\n  };\n  FruchtermanLayout.prototype.stop = function () {};\n  FruchtermanLayout.prototype.destroy = function () {\n    this.stop();\n    this.tick = null;\n    this.nodes = null;\n    this.edges = null;\n    this.destroyed = true;\n  };\n  FruchtermanLayout.prototype.getType = function () {\n    return 'fruchterman';\n  };\n  return FruchtermanLayout;\n})(base_1.Base);\nexports.FruchtermanLayout = FruchtermanLayout;\n//# sourceMappingURL=fruchterman.js.map\n","import { FruchtermanLayout } from '@antv/layout/lib/layout/fruchterman';\n\nexport default FruchtermanLayout;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Base = void 0;\nvar Base = /** @class */ (function () {\n    function Base() {\n        this.nodes = [];\n        this.edges = [];\n        this.combos = [];\n        this.positions = [];\n        this.destroyed = false;\n        this.onLayoutEnd = function () { };\n    }\n    Base.prototype.layout = function (data) {\n        this.init(data);\n        return this.execute(true);\n    };\n    Base.prototype.init = function (data) {\n        this.nodes = data.nodes || [];\n        this.edges = data.edges || [];\n        this.combos = data.combos || [];\n    };\n    Base.prototype.execute = function (reloadData) { };\n    Base.prototype.executeWithWorker = function () { };\n    Base.prototype.getDefaultCfg = function () {\n        return {};\n    };\n    Base.prototype.updateCfg = function (cfg) {\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    };\n    Base.prototype.getType = function () {\n        return 'base';\n    };\n    Base.prototype.destroy = function () {\n        this.nodes = null;\n        this.edges = null;\n        this.combos = null;\n        this.positions = null;\n        this.destroyed = true;\n    };\n    Base.prototype.onTick = function () { };\n    return Base;\n}());\nexports.Base = Base;\n//# sourceMappingURL=base.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./string\"), exports);\n__exportStar(require(\"./array\"), exports);\n__exportStar(require(\"./number\"), exports);\n__exportStar(require(\"./math\"), exports);\n__exportStar(require(\"./object\"), exports);\n__exportStar(require(\"./function\"), exports);\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}